trigger:
- main
- test-snapshot-feed

pool:
  vmImage: ubuntu-22.04

steps:
- powershell: |
    Write-Host "My first secret variable is $env:FOO_ONE"
    $env:FOO_ONE -eq "foo"
  env:
    FOO_ONE: $(mySecret)
- bash: |
    echo "My second secret variable: $FOO_TWO"
    if [ "$FOO_TWO" = "foo" ]; then
        echo "Strings are equal."
    else
        echo "Strings are not equal."
    fi
  env:
    FOO_TWO: $(mySecret)

- bash: |
    echo "Using the mapped env var for this task works and is recommended: $MY_MAPPED_ENV_VAR"
  env:
    MY_MAPPED_ENV_VAR: $(mySecret) # the recommended way to map to an env variable

- script: bash ./scripts/download_driver_for_all_platforms.sh

- script: mvn -B deploy -D skipTests --no-transfer-progress --settings maven-settings.xml
  displayName: 'Deploy'
  env:
    ADO_USERNAME: $(ADO_USERNAME)
    ADO_PASSWORD: $(ADO_PASSWORD)
